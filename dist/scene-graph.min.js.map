{"version":3,"sources":["./dist/scene-graph.dev.js"],"names":["exports","vmath","b","a","Math","random","toString","replace","v3_a","vec3","create","q_a","quat","m3_a","mat3","m3_b","m4_a","mat4","Node","[object Object]","name","this","_id","_parent","_children","lpos","new","lscale","lrot","id","parent","children","fn","newNode","copy","clone","Array","length","i","child","newChild","deepClone","newParent","oldParent","cur","len","splice","push","idx","node","removeChild","out","mul","transformQuat","add","pos","invTransformPoint","rot","getWorldRot","conjugate","fromQuat","_getWorldRS","sub","inverseSafe","fromRTS","getLocalMatrix","_getWorldPosAndRot","fromRT","set","x","y","z","opos","orot","walk","forEach","continueWalk","flat","iter","oldNode","remove","utils","sgraph","window"],"mappings":"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","file":"./dist/scene-graph.min.js"}