{"version":3,"sources":["./dist/scene-graph.dev.js"],"names":["exports","vmath","b","a","Math","random","toString","replace","v3_a","vec3","create","q_a","quat","m3_a","mat3","m3_b","m4_a","mat4","Node","[object Object]","name","this","_id","_parent","_children","lpos","new","lscale","lrot","id","parent","children","fn","newNode","copy","clone","Array","length","i","child","newChild","deepClone","newParent","oldParent","cur","len","splice","push","idx","node","removeChild","pos","up","getWorldPos","sub","normalize","fromViewUp","setWorldRot","out","mul","transformQuat","add","invTransformPoint","rot","getWorldRot","conjugate","fromQuat","_getWorldRS","inverseSafe","fromRTS","getLocalMatrix","_getWorldPosAndRot","fromRT","set","x","y","z","opos","orot","walk","forEach","continueWalk","flat","iter","oldNode","remove","utils","sgraph","window"],"mappings":"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"}