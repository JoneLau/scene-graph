{"version":3,"sources":["./dist/scene-graph.dev.js"],"names":["exports","vmath","b","a","Math","random","toString","replace","v3_a","vec3","create","q_a","quat","m3_a","mat3","m3_b","m4_a","mat4","Node","[object Object]","name","this","_id","_parent","_children","lpos","new","lscale","lrot","id","parent","children","fn","newNode","copy","clone","Array","length","i","child","newChild","deepClone","newParent","oldParent","cur","len","splice","push","idx","node","removeChild","out","mul","transformQuat","add","pos","invTransformPoint","rot","getWorldRot","conjugate","fromQuat","_getWorldRS","sub","inverseSafe","fromRTS","getLocalMatrix","_getWorldPosAndRot","fromRT","set","x","y","z","opos","orot","walk","forEach","continueWalk","flat","iter","oldNode","remove","utils","sgraph","window"],"mappings":"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"}